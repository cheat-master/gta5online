!function(a){"use strict";function b(a,b){this.containerElement=a,this.setupFn=b}b.prototype.add=function(a,b,c){var d=document.createElement("div");return d.innerHTML=a.outerHTML,this.containerElement.appendChild(d),this.setupFn&&this.setupFn(d,this,c),b&&b(d,this,c),d},b.prototype.remove=function(a){this.containerElement.removeChild(a)},a.SiviContainerManager=b}(window),function(a){"use strict";function b(a){return"function"==typeof a?a():a}function c(a,b,d){this.propElement=a,this.defaultPosition=c.positions[b]?b:c.defaultPosition,this.fixedZIndex=d||c.defaultFixedZIndex}c.defaultFixedZIndex=2e6,c.prototype.positionFixedElement=function(a,b){var d=function(){b&&c.positions[b]||(b=this.defaultPosition),a.style.position="fixed",a.style.zIndex=this.fixedZIndex,this.calculateAndSetPosition(a,b),this.fitsViewport(a)||(this.calculateAndSetPosition(a,c.positions[b]),this.fitsViewport(a)||this.calculateAndSetPosition(a,b))}.bind(this);d(),window.addEventListener("scroll",d)},c.prototype.calculateAndSetPosition=function(a,c){var d=this.propElement.getBoundingClientRect(),e={w:a.offsetWidth,h:a.offsetHeight},f=this.calculatePosition(e,d,c);Object.keys(f).forEach(function(c){a.style[c]=b(f[c])+"px"})},c.prototype.calculatePosition=function(a,b,c){var d=function(){if(b.left+a.w>document.body.clientWidth){var c=b.left+b.width-a.w;if(c>=0)return c}return b.left},e=function(){if(b.top+a.h>(window.innerHeight||document.documentElement.clientHeight)){var c=b.top+b.height-a.h;if(c>=0)return c}return b.top};switch(c){case"top":return{top:b.top-a.h,left:d,minWidth:b.width};case"bottom":return{top:b.top+b.height,left:d,minWidth:b.width};case"left":return{top:e,left:b.left-a.w};case"right":return{top:e,left:b.left+b.width}}},c.prototype.fitsViewport=function(a){var b=a.getBoundingClientRect();return b.top>=0&&b.left>=0&&b.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&b.right<=(window.innerWidth||document.documentElement.clientWidth)},c.positions={top:"bottom",bottom:"top",left:"right",right:"left"},c.defaultPosition="bottom",a.SiviPositioner=c}(window),function(a,b){"use strict";function c(a,b,d){this.element=a,this.popover=b,this.hoverTracker=[],this.hoverOpenTimeout=null,this.hoverCloseTimeout=null,d&&c.triggerEventTypes[d]?this.eventType=d:this.eventType=c.defaultTriggerEventType,this.setup()}function d(a,c,d,e,f){this.containerManager=a,this.element=d,this.parentElement=e,this.containerManagerElement=null,this.setContext(c),this.positioner=new b(e,f||this.getPositionFromContext()),this.setup()}var e=100,f=300;c.triggerEventTypes={click:!0,hover:!0},c.defaultTriggerEventType="hover",c.prototype.setup=function(){switch(this.eventType){case"click":this.element.addEventListener("click",this.toggle.bind(this),!1),this.element.addEventListener("blur",this.close.bind(this),!1);break;case"hover":this.element.addEventListener("mouseenter",this.onMouseEnter.bind(this,0),!1),this.element.addEventListener("mouseleave",this.onMouseLeave.bind(this,0),!1)}window.addEventListener("resize",this.close.bind(this),!1)},c.prototype.onMouseEnter=function(a){this.hoverTracker[a]=!0,this.cancelCloseTimeout(),this.hoverOpenTimeout||this.popover.isOpened()||(this.hoverOpenTimeout=setTimeout(this.open.bind(this),e))},c.prototype.onMouseLeave=function(a){delete this.hoverTracker[a],this.hoverTracker.filter(function(a){return a}).length||(this.cancelOpenTimeout(),this.hoverCloseTimeout||(this.hoverCloseTimeout=setTimeout(this.close.bind(this),f)))},c.prototype.toggle=function(){this.popover.isOpened()?this.close():this.open()},c.prototype.open=function(){this.hoverOpenTimeout=null,this.popover.open()},c.prototype.close=function(){this.hoverOpenTimeout&&(clearTimeout(this.hoverOpenTimeout),this.hoverOpenTimeout=null),this.popover.close()},c.prototype.cancelOpenTimeout=function(){this.hoverOpenTimeout&&(clearTimeout(this.hoverOpenTimeout),this.hoverOpenTimeout=null)},c.prototype.cancelCloseTimeout=function(){this.hoverCloseTimeout&&(clearTimeout(this.hoverCloseTimeout),this.hoverCloseTimeout=null)},c.prototype.onPopoverMouseEnter=function(a){"hover"===this.eventType&&this.onMouseEnter(1+(a||0))},c.prototype.onPopoverMouseLeave=function(a){"hover"===this.eventType&&this.onMouseLeave(1+(a||0))},d.defaultOpenedClass="-opened",d.prototype.setOpenedClass=function(a){this.openedClass=a},d.prototype.getOpenedClass=function(a){return this.openedClass||d.defaultOpenedClass},d.prototype.getPositionFromContext=function(){var a=this.context.popoverPlacements;return a&&a.length?a[Math.min(a.length-1,this.level)]:void 0},d.prototype.setContext=function(a){"undefined"==typeof a?this.context={stack:[]}:(this.context=a,this.context.stack=this.context.stack||[]),this.level=this.context.stack.length,this.level>0?this.parent=this.context.stack[this.context.stack.length-1]:this.parent=null},d.prototype.setup=function(){var a=Array.prototype.slice.call(this.parentElement.querySelectorAll("[data-popover-toggle]"));(!a.length||this.parentElement.getAttribute("data-popover-toggle"))&&a.push(this.parentElement),a.forEach(this.setupToggler.bind(this))},d.prototype.setupToggler=function(a){var b=a.getAttribute("data-popover-toggle");this.toggler=new c(a,this,b)},d.prototype.isOpened=function(){return!!this.containerManagerElement},d.prototype.onPopoverMouseEnter=function(a){a=a||0,this.toggler&&this.toggler.onPopoverMouseEnter(a),this.parent&&this.parent.onPopoverMouseEnter(1+a)},d.prototype.onPopoverMouseLeave=function(a){a=a||0,this.toggler&&this.toggler.onPopoverMouseLeave(a),this.parent&&this.parent.onPopoverMouseLeave(1+a)},d.prototype.toggle=function(){this.isOpened()?this.close():this.open()},d.prototype.open=function(){this.isOpened()&&this.close();var a=Object.keys(this.context).reduce(function(a,b){return"stack"===b||(a[b]=this.context[b]),a}.bind(this),{stack:this.context.stack.concat(this)});this.containerManagerElement=this.containerManager.add(this.element,function(a){this.positioner.positionFixedElement(a),a.addEventListener("mouseenter",this.onPopoverMouseEnter.bind(this),!1),a.addEventListener("mouseleave",this.onPopoverMouseLeave.bind(this),!1)}.bind(this),a),this.parentElement.classList.add(this.getOpenedClass())},d.prototype.close=function(){this.containerManagerElement&&(this.containerManager.remove(this.containerManagerElement),this.containerManagerElement=null,this.parentElement.classList.remove(this.getOpenedClass()))},a.SiviPopover=d}(window,SiviPositioner),function(a,b,c){"use strict";function d(a){this.element=a}function e(a){this.element=a;var b=a.getAttribute("data-popovers-placement");switch(b){case"left":this.arrowsSelector=".item-before span";break;default:this.arrowsSelector=".item-after span"}this.onResize()}function f(a){var b=a.getAttribute("data-sivi-menu-stylers"),c=[];return b&&b.split(/\s+/).forEach(function(b){if(b&&h[b]){var d=new h[b](a);"function"==typeof d.onResize&&c.push(d.onResize.bind(d))}}),c}function g(a,b,c,d){this.element=a,this.containerManager=b,this.context=c||{},this.onResizeHandlers=[],this.setupHandlers="undefined"==typeof d?!0:!!d,this.setup()}d.prototype.onResize=function(){var a=""+this.element.offsetHeight/2+"px",b=this.element.querySelectorAll(".menu-container.-root .item .item-after");Array.prototype.forEach.call(b,function(b){b.style.borderTopWidth=a,b.style.borderBottomWidth=a})},e.prototype.onResize=function(){var a=this.element.querySelectorAll(".menu-container.-root .item");Array.prototype.forEach.call(a,function(a){var b=""+a.offsetHeight/2+"px",c=a.querySelectorAll(this.arrowsSelector);Array.prototype.forEach.call(c,function(a){a.style.borderTopWidth=b,a.style.borderBottomWidth=b})}.bind(this))};var h={"style3-horizontal":d,"style3-vertical":e};g.defaultOverflowVisibleClass="-overflow-visible",g.defaultOverflowItemHiddenClass="-hidden",g.defaultFirstVisibleItemClass="-first-visible",g.defaultLastVisibleItemClass="-last-visible",g.prototype.setOverflowVisibleClass=function(a){this.overflowVisibleClass=a},g.prototype.getOverflowVisibleClass=function(){return this.overflowVisibleClass||g.defaultOverflowVisibleClass},g.prototype.setOverflowItemHiddenClass=function(a){this.overflowItemHiddenClass=a},g.prototype.getOverflowItemHiddenClass=function(){return this.overflowItemHiddenClass||g.defaultOverflowItemHiddenClass},g.prototype.setLastVisibleItemClass=function(a){this.lastVisibleItemClass=a},g.prototype.getLastVisibleItemClass=function(){return this.lastVisibleItemClass||g.defaultLastVisibleItemClass},g.prototype.setFirstVisibleItemClass=function(a){this.firstVisibleItemClass=a},g.prototype.getFirstVisibleItemClass=function(){return this.firstVisibleItemClass||g.defaultFirstVisibleItemClass},g.prototype.setup=function(){this.setupLevelClass(),this.setupPopoversPlacementConfiguration(),this.setupOverflow(),this.onResizeHandlers.push(this.setupOverflow.bind(this)),this.setupStylers(),this.setupHandlers&&Array.prototype.forEach.call(this.element.querySelectorAll("[data-dropdown]"),this.setupDropdown.bind(this)),this.activeAnchors=[],Array.prototype.forEach.call(this.element.querySelectorAll(".item.-link.-selected"),function(a){this.activeAnchors.push(a),a.href.indexOf("#")>0&&$(a).click(function(){return setTimeout(function(){this.setAnchor()}.bind(this),30),!0}.bind(this)),a.href!=location.href&&a.classList.remove("-selected")}.bind(this))},g.prototype.setAnchor=function(){this.activeAnchors.forEach(function(a){a.href!=location.href?(a.classList.remove("-selected"),a.classList.contains("-link")||a.classList.add("-link")):(a.classList.remove("-link"),a.classList.contains("-selected")||a.classList.add("-selected"))})},g.prototype.setupLevelClass=function(){var a=this.context&&this.context.stack?this.context.stack.length:0;this.element.classList.add("-level"+a)},g.prototype.setupStylers=function(){var a=f(this.element);a instanceof Array&&a.length&&(this.onResizeHandlers=this.onResizeHandlers.concat(a))},g.prototype.setupPopoversPlacementConfiguration=function(){var a=this.element.getAttribute("data-popovers-placement");a?this.context.popoverPlacements=a.split(/\s*,\s*/):this.context.popoverPlacements=this.context.popoverPlacements||[]},g.prototype.onResize=function(){this.onResizeHandlers.forEach(function(a){a()})},g.prototype.forEachAssociatedElement=function(a,b){var c=a.getAttribute("data-sivi-menu-item-id");c&&Array.prototype.forEach.call(this.element.querySelectorAll('[data-for="'+c+'"]'),b)},g.prototype.setupOverflow=function(){var a=this.element.querySelector("[data-sivi-menu-items-root]");if(a){var b=this.element.querySelector("[data-sivi-menu-overflow-item]");if(b){var c=b.getAttribute("data-sivi-menu-overflow-item"),d=a.querySelectorAll("[data-sivi-menu-item]");Array.prototype.forEach.call(d,function(a){a.classList.remove(this.getOverflowItemHiddenClass()),a.classList.remove(this.getFirstVisibleItemClass()),a.classList.remove(this.getLastVisibleItemClass()),this.forEachAssociatedElement(a,function(a){a.hasAttribute("data-display-orig")?a.style.display=a.getAttribute("data-display-orig"):a.setAttribute("data-display-orig",a.style.display)})}.bind(this));try{var e={horizontal:function(){return a.clientWidth<=this.clientWidth},vertical:function(){return a.clientHeight<=this.clientHeight}}[c].bind(this.element)}catch(f){return void console.error("Unknown overflowType: "+c)}if(b.classList.remove(this.getFirstVisibleItemClass()),e())return b.classList.remove(this.getOverflowVisibleClass()),b.classList.remove(this.getLastVisibleItemClass()),b.classList.add(this.getOverflowItemHiddenClass()),void(d.length&&(d[0].classList.add(this.getFirstVisibleItemClass()),d[d.length-1].classList.add(this.getLastVisibleItemClass())));var g=document.getElementById(b.getAttribute("data-dropdown"));if(!g)return void console.error("overflowContainer not found");b.classList.add(this.getOverflowVisibleClass()),b.classList.add(this.getLastVisibleItemClass()),b.classList.remove(this.getOverflowItemHiddenClass());for(var h=[],i=d.length-1;i>=0;--i){var j=d[i];if(h.unshift(j.cloneNode(!0)),j.classList.add(this.getOverflowItemHiddenClass()),this.forEachAssociatedElement(j,function(a){a.style.display="none"}),e()){var k;k=i>0?d[0]:b,k.classList.add(this.getFirstVisibleItemClass());break}}var l=g.querySelector("[data-sivi-menu-items]");if(!l)return void console.error("overflowItemsContainer not found");l.innerHTML="",h.forEach(function(a){l.appendChild(a)})}}},g.prototype.setupDropdown=function(a){var c=document.getElementById(a.getAttribute("data-dropdown"));c&&new b(this.containerManager,this.context,c,a,c.getAttribute("data-dropdown-popover"))},g.create=function(a,b,d){var e=document.createElement("div");return e.className=a.className+" "+(b||"-wrapper"),new g(a,new c(document.body.appendChild(e),function(a,b,c){new g(a,b,c)}),void 0,d)},g.setupComponent=function(a,b,c,d){var e=a.querySelector(c||"[data-sivi-menu]");return e?g.create(e,d,b):void 0},g.setupAll=function(a,b){Array.prototype.forEach.call(document.querySelectorAll(a),function(a){g.create(a,b)})},a.SiviMenu=g}(window,window.SiviPopover,window.SiviContainerManager);